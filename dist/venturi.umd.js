!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(t=t||self).venturi=s()}(this,function(){return class{constructor(t){this.data=[],this.chunkSize=0,this.listeners=[],this.nextListeners=[],this.chunkSize=t}pushChunk(){if(this.data.length>=this.chunkSize){const t=new Uint8Array(this.data.splice(0,this.chunkSize));this.listeners.forEach(s=>s(t));const s=this.nextListeners.shift();s&&s(t),this.pushChunk()}}push(t){this.data=[...this.data,...Array.from(t)],this.pushChunk()}listen(t){this.listeners.push(t)}nextChunk(t){this.nextListeners.push(t)}clear(){this.listeners=[],this.nextListeners=[]}}});

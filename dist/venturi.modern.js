export default class{constructor(s){this.data=[],this.chunkSize=0,this.listeners=[],this.nextListeners=[],this.chunkSize=s}pushChunk(){if(this.data.length>=this.chunkSize){const s=new Uint8Array(this.data.splice(0,this.chunkSize));this.listeners.forEach(t=>t(s));const t=this.nextListeners.shift();t&&t(s),this.pushChunk()}}push(s){this.data=[...this.data,...Array.from(s)],this.pushChunk()}listen(s){this.listeners.push(s)}nextChunk(s){this.nextListeners.push(s)}clear(){this.listeners=[],this.nextListeners=[]}}
